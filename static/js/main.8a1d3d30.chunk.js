(this["webpackJsonpmarsrover-kata"]=this["webpackJsonpmarsrover-kata"]||[]).push([[0],{17:function(t,e,i){},18:function(t,e,i){},20:function(t,e,i){"use strict";i.r(e);var o,n=i(1),s=i.n(n),r=i(8),a=i.n(r),c=(i(17),i(18),i(10)),h=i(11),d=i(7),u=i(12),l=i(0),f=["type"];!function(t){t.Rover="R",t.Obstacle="X",t.Visited="V",t.NotVisited="O"}(o||(o={}));var v,b=function(t){var e=t.type,i=Object(u.a)(t,f);return Object(l.jsx)("div",Object(d.a)(Object(d.a)({className:"p-2 bg-gray-900"},i),{},{children:e}))},O=i(2),p=i(4),w=function(){function t(e,i){Object(O.a)(this,t),this.x=e,this.y=i}return Object(p.a)(t,[{key:"equals",value:function(t){return!!t&&this.x===t.x&&this.y===t.y}}]),t}(),y=i(9),j=function(t){return null===t||void 0===t||Number.isNaN(t)||""===t};!function(t){t.East="E",t.West="W",t.North="N",t.South="S"}(v||(v={}));var x,g=[v.East,v.South,v.West,v.North],k=function(){function t(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(O.a)(this,t),this.position=void 0,this.direction=v.North,this.hasObstacles=!1,"string"===typeof e){var n=t.parse(e);this.position=new w(n.position.x,n.position.y),this.direction=n.direction,this.hasObstacles=n.hasObstacles}else this.position=new w(e.x,e.y),this.direction=i,this.hasObstacles=o}return Object(p.a)(t,[{key:"toString",value:function(){var t="".concat(this.position.x,":").concat(this.position.y,":").concat(this.direction);return this.hasObstacles&&(t="O:"+t),t}}],[{key:"parse",value:function(e){if(!e)throw new Error("Not valid coordinates!");var i=!1;e.startsWith("O:")&&(i=!0,e=e.replace("O:",""));var o=e.split(":"),n=+o[0],s=+o[1],r=o[2];if(j(n)||j(s)||j(r)||!Object.values(v).includes(r))throw new Error("Not valid coordinates!");return new t(new w(n,s),r,i)}}]),t}();!function(t){t.Move="M",t.RotateLeft="L",t.RotateRight="R"}(x||(x={}));var m,R=function(){function t(e){Object(O.a)(this,t),this.grid=e,this.coordinates=new k("0:0:N")}return Object(p.a)(t,[{key:"tryMoveTowardsPoint",value:function(t,e){this.grid.hasObstacleOnPoint(t)?this.coordinates.hasObstacles=!0:(this.coordinates.hasObstacles=!1,e())}},{key:"moveForward",value:function(){var t=this;switch(this.coordinates.direction){case v.East:var e=(this.coordinates.position.x+1)%this.grid.cols;this.tryMoveTowardsPoint(new w(e,this.coordinates.position.y),(function(){return t.coordinates.position.x=e}));break;case v.West:var i=(this.coordinates.position.x?this.coordinates.position.x:this.grid.cols)-1;this.tryMoveTowardsPoint(new w(i,this.coordinates.position.y),(function(){return t.coordinates.position.x=i}));break;case v.North:var o=(this.coordinates.position.y+1)%this.grid.rows;this.tryMoveTowardsPoint(new w(this.coordinates.position.x,o),(function(){return t.coordinates.position.y=o}));break;case v.South:var n=(this.coordinates.position.y?this.coordinates.position.y:this.grid.rows)-1;this.tryMoveTowardsPoint(new w(this.coordinates.position.x,n),(function(){return t.coordinates.position.y=n}));break;default:throw new Error("Unknown direction!")}}},{key:"execute",value:function(t){if(!t)throw new Error("Command/s is not valid!");var e,i=Object(y.a)("string"===typeof t?t.split(""):t);try{for(i.s();!(e=i.n()).done;){switch(e.value){case x.Move:this.moveForward();break;case x.RotateRight:this.coordinates.direction=g[(g.indexOf(this.coordinates.direction)+1)%g.length];break;case x.RotateLeft:var o=g.indexOf(this.coordinates.direction);this.coordinates.direction=g[(o||g.length)-1];break;default:throw new Error("Command type not known!")}}}catch(n){i.e(n)}finally{i.f()}return this.coordinates.toString()}}]),t}();!function(t){t.Move="k",t.RotateLeft="j",t.RotateRight="l"}(m||(m={}));var N=function(t){var e=Object(n.useRef)(new R(t.grid)),i=Object(n.useState)([new w(e.current.coordinates.position.x,e.current.coordinates.position.y)]),s=Object(h.a)(i,2),r=s[0],a=s[1];Object(n.useEffect)((function(){var t=function(t){switch(t.key){case m.Move:e.current.execute([x.Move]),a([].concat(Object(c.a)(r),[new w(e.current.coordinates.position.x,e.current.coordinates.position.y)]));break;case m.RotateLeft:e.current.execute([x.RotateLeft]);break;case m.RotateRight:e.current.execute([x.RotateRight])}};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[r]);var d=Array(t.grid.cols).fill(null).map((function(i,n){var s=Array(t.grid.rows).fill(null).map((function(i,s){var a="e_".concat(n,"_").concat(s),c=function(i){return t.grid.hasObstacleOnPoint(i)?o.Obstacle:e.current.coordinates.position.equals(i)?o.Rover:r.some((function(t){return t.equals(i)}))?o.Visited:o.NotVisited}(new w(n,s));return Object(l.jsx)(b,{type:c,"data-testid":a},a)}));return Object(l.jsx)("div",{className:"flex flex-col-reverse",children:s},n)}));return Object(l.jsxs)("div",{className:"flex flex-col",children:[e.current.coordinates.hasObstacles&&Object(l.jsx)("span",{children:"BLOCKED BY OBSTACLE!"}),Object(l.jsx)("div",{className:"flex",children:d})]})},E=function t(e,i,o){var n=this;Object(O.a)(this,t),this.rows=void 0,this.cols=void 0,this.obstacles=void 0,this.hasObstacleOnPoint=function(t){return n.obstacles.some((function(e){return e.x===t.x&&e.y===t.y}))},this.rows=e,this.cols=e,this.obstacles=null!==o&&void 0!==o?o:[],"number"===typeof i?this.cols=i:Array.isArray(i)&&(this.obstacles=i)};var L=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)(N,{grid:new E(5,7,[new w(1,3)])})})})},M=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,21)).then((function(e){var i=e.getCLS,o=e.getFID,n=e.getFCP,s=e.getLCP,r=e.getTTFB;i(t),o(t),n(t),s(t),r(t)}))};a.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(L,{})}),document.getElementById("root")),M()}},[[20,1,2]]]);
//# sourceMappingURL=main.8a1d3d30.chunk.js.map