(this["webpackJsonpmarsrover-kata"]=this["webpackJsonpmarsrover-kata"]||[]).push([[0],{15:function(t,e,n){},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var r,o=n(2),i=n.n(o),c=n(8),a=n.n(c),s=(n(15),n(16),n(9)),u=n(1),d=n(3),l=n(4),v=function(t){return function(e){return t===e||!!t&&!!e&&t.x===e.x&&t.y===e.y}},f=function(t){return function(e){var n,r;return null===(n=e.obstacles)||void 0===n||null===(r=n.some)||void 0===r?void 0:r.call(n,v(t))}},b=n(10),j=n(0),O=["type"];!function(t){t.Rover="R",t.Obstacle="X",t.Visited="V",t.NotVisited="O"}(r||(r={}));var h,p=function(t){var e=t.type,n=Object(b.a)(t,O);return Object(j.jsx)("div",Object(u.a)(Object(u.a)({className:"p-2 h-10 w-10 bg-gray-900 rounded-full flex items-center justify-center"},n),{},{children:e}))};!function(t){t.East="E",t.West="W",t.North="N",t.South="S"}(h||(h={}));var x,y=[h.East,h.South,h.West,h.North],g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.North,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{position:Object(u.a)({},t),direction:e,hasObstacles:n}},m=function(t){if(!t)return[void 0,Error("Coordinates are required!")];var e=!1;t.startsWith("O:")&&(e=!0,t=t.replace("O:",""));var n=t.split(":"),r=+n[0],o=+n[1],i=n[2];return Number.isNaN(r)?[void 0,Error("Rows are required!")]:Number.isNaN(o)?[void 0,Error("Columns are required")]:i&&Object.values(h).includes(i)?[{position:{x:r,y:o},direction:i,hasObstacles:e}]:[void 0,Error("Direction is not one of the possible: ".concat(h))]},w=function(t){var e="".concat(t.position.x,":").concat(t.position.y,":").concat(t.direction);return t.hasObstacles&&(e="O:"+e),e};!function(t){t.Move="M",t.RotateLeft="L",t.RotateRight="R"}(x||(x={}));var R,N={tryMoveTowardsPoint:function(t){return function(e){return function(n){var r=Object(u.a)(Object(u.a)({},n.position),t);return f(r)(e)?Object(u.a)(Object(u.a)({},n),{},{hasObstacles:!0}):Object(u.a)(Object(u.a)({},n),{},{position:r,hasObstacles:!1})}}},getMoveFunction:function(t){return function(e){switch(e.direction){case h.East:var n=(e.position.x+1)%t.cols;return[N.tryMoveTowardsPoint({x:n})];case h.West:var r=(e.position.x?e.position.x:t.cols)-1;return[N.tryMoveTowardsPoint({x:r})];case h.North:var o=(e.position.y+1)%t.rows;return[N.tryMoveTowardsPoint({y:o})];case h.South:var i=(e.position.y?e.position.y:t.rows)-1;return[N.tryMoveTowardsPoint({y:i})];default:return[void 0,Error("Unknown direction!")]}}},moveForward:function(t){return function(e){var n=N.getMoveFunction(t)(e),r=Object(d.a)(n,2),o=r[0],i=r[1];return i||!o?[void 0,i]:[o(t)(e)]}}},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("0:0:N")[0];return{coordinates:t}},E=function(t){return function(e){return function(n){if(!t)return[void 0,Error("Command/s is not valid!")];var r=("string"===typeof t?t.split(""):t).reduce((function(t,n){var r=Object(d.a)(t,2),o=r[0];r[1];switch(n){case x.Move:var i=N.moveForward(e)(o),c=Object(d.a)(i,2),a=c[0],s=c[1];return s||!a?[o,s]:[a];case x.RotateRight:return[g(o.position,y[(y.indexOf(o.direction)+1)%y.length],!1)];case x.RotateLeft:var u=y.indexOf(o.direction);return[g(o.position,y[(u||y.length)-1],!1)];default:return[o,Error("Command type not known!")]}}),[Object(u.a)({},n.coordinates)]),o=Object(d.a)(r,1)[0];return[w(o)]}}},C=function(t){var e=t.children,n=t.onClick;return Object(j.jsx)("button",{className:"bg-gray-300 text-black rounded m-2",onClick:function(t){return null===n||void 0===n?void 0:n()},children:e})},M={Move:["k","ArrowUp"],RotateLeft:["j","ArrowLeft"],RotateRight:["l","ArrowRight"]},L=(R={},Object(l.a)(R,h.East,""),Object(l.a)(R,h.North,"-rotate-90"),Object(l.a)(R,h.West,"rotate-180"),Object(l.a)(R,h.South,"rotate-90"),R),S=function(t){var e=Object(o.useState)(k()),n=Object(d.a)(e,2),i=n[0],c=n[1],a=Object(o.useState)([Object(u.a)({},i.coordinates.position)]),l=Object(d.a)(a,2),b=l[0],O=l[1],h=Object(o.useCallback)((function(e){var n=E([e])(t.grid)(i),r=Object(d.a)(n,2),o=r[0];if(!r[1]&&o){var a=m(o),l=Object(d.a)(a,2),v=l[0];!l[1]&&v&&(c(k(v)),O([].concat(Object(s.a)(b),[Object(u.a)({},v.position)])))}}),[t.grid,i,b]);Object(o.useEffect)((function(){var t=function(t){M.Move.includes(t.key)?h(x.Move):M.RotateLeft.includes(t.key)?h(x.RotateLeft):M.RotateRight.includes(t.key)&&h(x.RotateRight)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[h]);var y=Object(o.useCallback)((function(e){return f(e)(t.grid)?r.Obstacle:v(i.coordinates.position)(e)?r.Rover:b.some(v(e))?r.Visited:r.NotVisited}),[t.grid,i.coordinates.position,b]),g=Array(t.grid.cols).fill(null).map((function(e,n){var o=Array(t.grid.rows).fill(null).map((function(t,e){var o="e_".concat(n,"_").concat(e),c=y({x:n,y:e});return Object(j.jsx)("div",{className:c===r.Rover?"transform ".concat(L[i.coordinates.direction]):"",children:Object(j.jsx)(p,{type:c,"data-testid":o})},o)}));return Object(j.jsx)("div",{className:"flex flex-col-reverse",children:o},n)}));return Object(j.jsxs)("div",{className:"flex flex-col items-center space-x-5 space-y-5",children:[i.coordinates.hasObstacles&&Object(j.jsx)("span",{children:"BLOCKED BY OBSTACLE!"}),Object(j.jsx)("div",{className:"flex",children:g}),Object(j.jsxs)("div",{className:"flex flex-row justify-between content-center",children:[Object(j.jsx)(C,{onClick:function(){return h(x.RotateLeft)},children:"Rotate Left"}),Object(j.jsx)(C,{onClick:function(){return h(x.Move)},children:"Move Forward"}),Object(j.jsx)(C,{onClick:function(){return h(x.RotateRight)},children:"Rotate Right"})]})]})};var F=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)(S,{grid:{rows:5,cols:7,obstacles:[{x:1,y:3}]}})})})},A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),r(t),o(t),i(t),c(t)}))};a.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root")),A()}},[[18,1,2]]]);
//# sourceMappingURL=main.215fabfb.chunk.js.map