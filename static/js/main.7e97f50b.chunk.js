(this["webpackJsonpmarsrover-kata"]=this["webpackJsonpmarsrover-kata"]||[]).push([[0],{15:function(t,e,n){},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var r,o,i=n(2),c=n.n(i),a=n(8),s=n.n(a),u=(n(15),n(16),n(9)),d=n(1),l=n(4),v=n(3),b=function(t){return function(e){return t===e||!!t&&!!e&&t.x===e.x&&t.y===e.y}},f=function(t){return function(e){var n,r;return null===(n=e.obstacles)||void 0===n||null===(r=n.some)||void 0===r?void 0:r.call(n,b(t))}},j=n(10),O=n(0),h=["type"];!function(t){t.Rover="R",t.Obstacle="X",t.Visited="V",t.NotVisited="O"}(o||(o={}));var p,x=(r={},Object(v.a)(r,o.Rover,"blue"),Object(v.a)(r,o.NotVisited,"gray"),Object(v.a)(r,o.Obstacle,"red"),Object(v.a)(r,o.Visited,"green"),r),g=function(t){var e=t.type,n=Object(j.a)(t,h);return Object(O.jsx)("div",Object(d.a)(Object(d.a)({className:"p-2 h-10 w-10 bg-".concat(x[e],"-900 rounded-full flex items-center justify-center")},n),{},{children:e}))};!function(t){t.East="E",t.West="W",t.North="N",t.South="S"}(p||(p={}));var y,m=[p.East,p.South,p.West,p.North],w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.North,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{position:Object(d.a)({},t),direction:e,hasObstacles:n}},R=function(t){if(!t)return[void 0,Error("Coordinates are required!")];var e=!1;t.startsWith("O:")&&(e=!0,t=t.replace("O:",""));var n=t.split(":"),r=+n[0],o=+n[1],i=n[2];return Number.isNaN(r)?[void 0,Error("Rows are required!")]:Number.isNaN(o)?[void 0,Error("Columns are required")]:i&&Object.values(p).includes(i)?[{position:{x:r,y:o},direction:i,hasObstacles:e}]:[void 0,Error("Direction is not one of the possible: ".concat(p))]},N=function(t){var e="".concat(t.position.x,":").concat(t.position.y,":").concat(t.direction);return t.hasObstacles&&(e="O:"+e),e};!function(t){t.Move="M",t.RotateLeft="L",t.RotateRight="R"}(y||(y={}));var k,E={tryMoveTowardsPoint:function(t){return function(e){return function(n){var r=Object(d.a)(Object(d.a)({},n.position),t);return f(r)(e)?Object(d.a)(Object(d.a)({},n),{},{hasObstacles:!0}):Object(d.a)(Object(d.a)({},n),{},{position:r,hasObstacles:!1})}}},getMoveFunction:function(t){return function(e){switch(e.direction){case p.East:var n=(e.position.x+1)%t.cols;return[E.tryMoveTowardsPoint({x:n})];case p.West:var r=(e.position.x?e.position.x:t.cols)-1;return[E.tryMoveTowardsPoint({x:r})];case p.North:var o=(e.position.y+1)%t.rows;return[E.tryMoveTowardsPoint({y:o})];case p.South:var i=(e.position.y?e.position.y:t.rows)-1;return[E.tryMoveTowardsPoint({y:i})];default:return[void 0,Error("Unknown direction!")]}}},moveForward:function(t){return function(e){var n=E.getMoveFunction(t)(e),r=Object(l.a)(n,2),o=r[0],i=r[1];return i||!o?[void 0,i]:[o(t)(e)]}}},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R("0:0:N")[0];return{coordinates:t}},M=function(t){return function(e){return function(n){if(!t)return[void 0,Error("Command/s is not valid!")];var r=("string"===typeof t?t.split(""):t).reduce((function(t,n){var r=Object(l.a)(t,2),o=r[0];r[1];switch(n){case y.Move:var i=E.moveForward(e)(o),c=Object(l.a)(i,2),a=c[0],s=c[1];return s||!a?[o,s]:[a];case y.RotateRight:return[w(o.position,m[(m.indexOf(o.direction)+1)%m.length],!1)];case y.RotateLeft:var u=m.indexOf(o.direction);return[w(o.position,m[(u||m.length)-1],!1)];default:return[o,Error("Command type not known!")]}}),[Object(d.a)({},n.coordinates)]),o=Object(l.a)(r,1)[0];return[N(o)]}}},L=function(t){var e=t.children,n=t.onClick;return Object(O.jsx)("button",{className:"bg-gray-300 text-black rounded m-2",onClick:function(t){return null===n||void 0===n?void 0:n()},children:e})},S={Move:["k","ArrowUp"],RotateLeft:["j","ArrowLeft"],RotateRight:["l","ArrowRight"]},F=(k={},Object(v.a)(k,p.East,""),Object(v.a)(k,p.North,"-rotate-90"),Object(v.a)(k,p.West,"rotate-180"),Object(v.a)(k,p.South,"rotate-90"),k),A=function(t){var e=Object(i.useState)(C()),n=Object(l.a)(e,2),r=n[0],c=n[1],a=Object(i.useState)([Object(d.a)({},r.coordinates.position)]),s=Object(l.a)(a,2),v=s[0],j=s[1],h=Object(i.useCallback)((function(e){var n=M([e])(t.grid)(r),o=Object(l.a)(n,2),i=o[0];if(!o[1]&&i){var a=R(i),s=Object(l.a)(a,2),b=s[0];!s[1]&&b&&(c(C(b)),j([].concat(Object(u.a)(v),[Object(d.a)({},b.position)])))}}),[t.grid,r,v]);Object(i.useEffect)((function(){var t=function(t){S.Move.includes(t.key)?h(y.Move):S.RotateLeft.includes(t.key)?h(y.RotateLeft):S.RotateRight.includes(t.key)&&h(y.RotateRight)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[h]);var p=Object(i.useCallback)((function(e){return f(e)(t.grid)?o.Obstacle:b(r.coordinates.position)(e)?o.Rover:v.some(b(e))?o.Visited:o.NotVisited}),[t.grid,r.coordinates.position,v]),x=Array(t.grid.cols).fill(null).map((function(e,n){var i=Array(t.grid.rows).fill(null).map((function(t,e){var i="e_".concat(n,"_").concat(e),c=p({x:n,y:e});return Object(O.jsx)("div",{className:c===o.Rover?"transform ".concat(F[r.coordinates.direction]):"",children:Object(O.jsx)(g,{type:c,"data-testid":i})},i)}));return Object(O.jsx)("div",{className:"flex flex-col-reverse",children:i},n)}));return Object(O.jsxs)("div",{className:"flex flex-col items-center space-x-5 space-y-5",children:[Object(O.jsx)("div",{className:"h-10",children:r.coordinates.hasObstacles&&Object(O.jsx)("span",{children:"BLOCKED BY OBSTACLE!"})}),Object(O.jsx)("div",{className:"flex",children:x}),Object(O.jsxs)("div",{className:"flex flex-row justify-between content-center",children:[Object(O.jsx)(L,{onClick:function(){return h(y.RotateLeft)},children:"Rotate Left"}),Object(O.jsx)(L,{onClick:function(){return h(y.Move)},children:"Move Forward"}),Object(O.jsx)(L,{onClick:function(){return h(y.RotateRight)},children:"Rotate Right"})]})]})};var T=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)("header",{className:"App-header",children:Object(O.jsx)(A,{grid:{rows:5,cols:7,obstacles:[{x:1,y:3}]}})})})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),r(t),o(t),i(t),c(t)}))};s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(T,{})}),document.getElementById("root")),P()}},[[18,1,2]]]);
//# sourceMappingURL=main.7e97f50b.chunk.js.map