(this["webpackJsonpmarsrover-kata"]=this["webpackJsonpmarsrover-kata"]||[]).push([[0],{18:function(t,e,i){},19:function(t,e,i){},21:function(t,e,i){"use strict";i.r(e);var o,n=i(1),s=i.n(n),r=i(10),a=i.n(r),c=(i(18),i(19),i(12)),h=i(7),d=i(3),u=i(9),l=i(13),f=i(0),v=["type"];!function(t){t.Rover="R",t.Obstacle="X",t.Visited="V",t.NotVisited="O"}(o||(o={}));var b,O=function(t){var e=t.type,i=Object(l.a)(t,v);return Object(f.jsx)("div",Object(u.a)(Object(u.a)({className:"p-2 h-10 w-10 bg-gray-900 rounded-full flex items-center justify-center"},i),{},{children:e}))},p=i(2),w=i(5),j=function(){function t(e,i){Object(p.a)(this,t),this.x=e,this.y=i}return Object(w.a)(t,[{key:"equals",value:function(t){return!!t&&this.x===t.x&&this.y===t.y}}]),t}(),y=i(11),x=function(t){return null===t||void 0===t||Number.isNaN(t)||""===t};!function(t){t.East="E",t.West="W",t.North="N",t.South="S"}(b||(b={}));var g,m=[b.East,b.South,b.West,b.North],k=function(){function t(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(p.a)(this,t),this.position=void 0,this.direction=b.North,this.hasObstacles=!1,"string"===typeof e){var n=t.parse(e);this.position=new j(n.position.x,n.position.y),this.direction=n.direction,this.hasObstacles=n.hasObstacles}else this.position=new j(e.x,e.y),this.direction=i,this.hasObstacles=o}return Object(w.a)(t,[{key:"toString",value:function(){var t="".concat(this.position.x,":").concat(this.position.y,":").concat(this.direction);return this.hasObstacles&&(t="O:"+t),t}}],[{key:"parse",value:function(e){if(!e)throw new Error("Not valid coordinates!");var i=!1;e.startsWith("O:")&&(i=!0,e=e.replace("O:",""));var o=e.split(":"),n=+o[0],s=+o[1],r=o[2];if(x(n)||x(s)||x(r)||!Object.values(b).includes(r))throw new Error("Not valid coordinates!");return new t(new j(n,s),r,i)}}]),t}();!function(t){t.Move="M",t.RotateLeft="L",t.RotateRight="R"}(g||(g={}));var N,R,E=function(){function t(e){Object(p.a)(this,t),this.grid=e,this.coordinates=new k("0:0:N")}return Object(w.a)(t,[{key:"tryMoveTowardsPoint",value:function(t,e){this.grid.hasObstacleOnPoint(t)?this.coordinates.hasObstacles=!0:(this.coordinates.hasObstacles=!1,e())}},{key:"moveForward",value:function(){var t=this;switch(this.coordinates.direction){case b.East:var e=(this.coordinates.position.x+1)%this.grid.cols;this.tryMoveTowardsPoint(new j(e,this.coordinates.position.y),(function(){return t.coordinates.position.x=e}));break;case b.West:var i=(this.coordinates.position.x?this.coordinates.position.x:this.grid.cols)-1;this.tryMoveTowardsPoint(new j(i,this.coordinates.position.y),(function(){return t.coordinates.position.x=i}));break;case b.North:var o=(this.coordinates.position.y+1)%this.grid.rows;this.tryMoveTowardsPoint(new j(this.coordinates.position.x,o),(function(){return t.coordinates.position.y=o}));break;case b.South:var n=(this.coordinates.position.y?this.coordinates.position.y:this.grid.rows)-1;this.tryMoveTowardsPoint(new j(this.coordinates.position.x,n),(function(){return t.coordinates.position.y=n}));break;default:throw new Error("Unknown direction!")}}},{key:"execute",value:function(t){if(!t)throw new Error("Command/s is not valid!");var e,i=Object(y.a)("string"===typeof t?t.split(""):t);try{for(i.s();!(e=i.n()).done;){switch(e.value){case g.Move:this.moveForward();break;case g.RotateRight:this.coordinates.direction=m[(m.indexOf(this.coordinates.direction)+1)%m.length];break;case g.RotateLeft:var o=m.indexOf(this.coordinates.direction);this.coordinates.direction=m[(o||m.length)-1];break;default:throw new Error("Command type not known!")}}}catch(n){i.e(n)}finally{i.f()}return this.coordinates.toString()}}]),t}();!function(t){t.Move="k",t.RotateLeft="j",t.RotateRight="l"}(R||(R={}));var L=(N={},Object(d.a)(N,b.East,""),Object(d.a)(N,b.North,"-rotate-90"),Object(d.a)(N,b.West,"rotate-180"),Object(d.a)(N,b.South,"rotate-90"),N),M=function(t){var e=Object(n.useRef)(new E(t.grid)),i=Object(n.useState)([new j(e.current.coordinates.position.x,e.current.coordinates.position.y)]),s=Object(h.a)(i,2),r=s[0],a=s[1],d=function(){var t=Object(n.useState)(1),e=Object(h.a)(t,2),i=e[0],o=e[1];return function(){return o(i+1)}}();Object(n.useEffect)((function(){var t=function(t){switch(t.key){case R.Move:e.current.execute([g.Move]),a([].concat(Object(c.a)(r),[new j(e.current.coordinates.position.x,e.current.coordinates.position.y)]));break;case R.RotateLeft:e.current.execute([g.RotateLeft]),d();break;case R.RotateRight:e.current.execute([g.RotateRight]),d()}};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[d,r]);var u=Array(t.grid.cols).fill(null).map((function(i,n){var s=Array(t.grid.rows).fill(null).map((function(i,s){var a="e_".concat(n,"_").concat(s),c=function(i){return t.grid.hasObstacleOnPoint(i)?o.Obstacle:e.current.coordinates.position.equals(i)?o.Rover:r.some((function(t){return t.equals(i)}))?o.Visited:o.NotVisited}(new j(n,s));return Object(f.jsx)("div",{className:c===o.Rover?"transform ".concat(L[e.current.coordinates.direction]):"",children:Object(f.jsx)(O,{type:c,"data-testid":a})},a)}));return Object(f.jsx)("div",{className:"flex flex-col-reverse",children:s},n)}));return Object(f.jsxs)("div",{className:"flex flex-col",children:[e.current.coordinates.hasObstacles&&Object(f.jsx)("span",{children:"BLOCKED BY OBSTACLE!"}),Object(f.jsx)("div",{className:"flex",children:u})]})},S=function t(e,i,o){var n=this;Object(p.a)(this,t),this.rows=void 0,this.cols=void 0,this.obstacles=void 0,this.hasObstacleOnPoint=function(t){return n.obstacles.some((function(e){return e.x===t.x&&e.y===t.y}))},this.rows=e,this.cols=e,this.obstacles=null!==o&&void 0!==o?o:[],"number"===typeof i?this.cols=i:Array.isArray(i)&&(this.obstacles=i)};var P=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("header",{className:"App-header",children:Object(f.jsx)(M,{grid:new S(5,7,[new j(1,3)])})})})},T=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,22)).then((function(e){var i=e.getCLS,o=e.getFID,n=e.getFCP,s=e.getLCP,r=e.getTTFB;i(t),o(t),n(t),s(t),r(t)}))};a.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root")),T()}},[[21,1,2]]]);
//# sourceMappingURL=main.a521fb0b.chunk.js.map